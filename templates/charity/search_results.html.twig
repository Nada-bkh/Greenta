{% extends 'baseBack.html.twig' %}

{% block body %}
	{% if results is not empty %}
		<table>
			<!-- Iterate over results and display each charity -->
			{% for charity in results %}
				<div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.{{ loop.index }}">
					<div class="service-item rounded d-flex h-100">
						<div
							class="service-img rounded">
							{# Display the charity image if imagePath property exists #}
							{% if charity.picture %}
								<img src="{{ asset('uploads/' ~ charity.picture) }}" style="width: 100%; height: 100%;" alt="charity pic" class="img-fluid">
							{% else %}
								<span>No Image</span>
							{% endif %}
						</div>
						<div class="service-text rounded p-5">
							<div
								class="btn-square rounded-circle mx-auto mb-3">{# You can add the charity icon here if available #}
							</div>
							<h4 class="mb-3">{{ charity.nameOfCharity }}</h4>
							<p class="mb-4">Amount needed:
								{{ charity.amountDonated }}</p>
							<p class="mb-4">Location:
								{{ charity.location }}</p>
							<p class="mb-4">Last date of donation:
								{{ charity.lastDate|date('Y-m-d') }}</p>
							<div class="d-flex justify-content-between align-items-center">
								<a class="btn btn-primary btn-sm" href="{{ path('app_charity_edit', {'id': charity.id}) }}">
									Edit
								</a>
								<form action="{{ path('app_charity_delete', {'id': charity.id}) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this charity?')">
									<input type="hidden" name="_method" value="DELETE">
									<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ charity.id) }}">
									<button type="submit" class="btn btn-danger btn-sm">Delete</button>
								</form>
							</div>
						</div>
					</div>
				{% endfor %}
			</table>
		{% else %}
			{% if query is not empty %}
				<p>No records found for "{{ query }}".</p>
			{% else %}
				<p>No search query provided.</p>
			{% endif %}
		{% endif %}
	{% endblock %}
